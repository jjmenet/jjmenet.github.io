---
layout: post
title: "GitBook.com의 Space 생성시 Title 제약"
date: 2020-12-15 12:24:50 +0900
author: jjme
category: disexperience
service: gitbook.com
tags: [web, i18n]
usemathjax: true
---

## 배경

[GitBook.com]은 온라인상에서 사용할 수 있는 문서화 도구 서비스이다.

나는 GitBook과 그 파생 프로젝트로 만들어졌다는 여러 결과물을 보고 GitBook을 써 보고 싶다는 생각을 했고, [GitBook.com]에 가입해서 직접 써 보기로 했다.[^1] 가입은 순조로웠고, 나는 [GitBook.com]이 제공하는 프로젝트의 단위인 **Space**를 신규 생성하려고 하였다.

[^1]: 그러나 이것은 삽질로 밝혀졌는데, 내가 본 결과물들은 이미 [GitBook.com] 팀이 버린(것으로 추정되는) [Legacy 프로젝트]와 거기서 포크된 프로젝트를 기반으로 만들어진 것이고, GitBook.com이 제공하는 서비스는 좀 더 *현대화*된 결과물을 제공하는 것으로 추측된다.

## 문제

Space를 생성하려 하자 사이트는 다음과 같은 모달 창을 제공했다.

{: .center}
![Space 생성 모달 창](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-14-01-42.png)

TITLE 아래 입력 창에 텍스트를 입력하자, 우측 브라우저 미리보기 창의 두 곳(제목 표시줄, 페이지 미리보기)의 텍스트가 내가 입력한 텍스트로 변화했다. 이를 통해서 나는 이 TITLE이 사용자에게 보이는 항목이라고 인지했고, 이 문서를 읽을 사람들을 고려해서 TITLE을 한글로 입력하기로 하였다. 그러자, 다음과 같은 오류 메세지가 표시됨과 함께 흐름이 멈췄다.

{: .center}
![Space 생성 모달 창의 오류](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-14-11-10.png)

사용자 입장에서는 '이해할 수 없는 오류 메세지'였지만, CJK 언어권에 사는 숙련된 사용자인 나는 아무튼 한글이 문제일 것이라고 생각했고, 아무 영어나 쳐서 다시 Create 버튼을 눌렀다. 그러자 Space가 잘 생성되었다. 그리고 주소창을 보니,

{: .center}
![생성된 Space의 Title과 주소창](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-14-17-07.png)

사용자 입력 텍스트로부터 url을 자동 생성하는 것 같다. 아하. 이런 거 WordPress에도 있었지. 아마 사용자 입력 텍스트에서 alphanumeric이 아닌 스트링은 적당히 제외하고, alphanumeric 사이의 공백은 하이픈으로 대체하고, 너무 길면 뒤를 잘라서 만드는 스타일이었던 걸로 기억한다. 그러면 내가 입력한 텍스트인 `다람쥐 헌 쳇바퀴에 타고파`는 "\-\-\-"이 되거나 그것마저 없는 빈 문자열이 되겠지. 그렇다면 TITLE을 `다람쥐 헌 쳇바퀴에 타고파2`로 입력하면 어떨까?

{: .center}
![다른 Title을 넣어 생성한 Space의 Title과 주소창](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-15-22-12.png)

…오호라! 그러니까 아까 Space가 생성이 안 된 이유는, *TITLE에 맞게 주소를 생성해야 하는데 주소가 빈 문자열이라서* 였구만! TITLE에 alphanumeric이 아닌 문자가 들어가는 건 별 상관이 없을 테니까, 이 상태에서 TITLE을 수정해 보면…

{: .center}
![원래 가지고 싶던 Title로 Space를 수정한 상태](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-15-25-49.png)

내가 원래 쓰려고 했던 Title로 잘 생성이 된다! url하고 연관은 없는 게 아쉽지만.

## 분석

### 데이터 도메인에 대한 고려 부족

위에서 보았지만, 한글을 비롯한 non-alphanumeric 문자열을 Title에서 쓸 수 없는 것은 아니다. 문제는 Space 생성 시 사용자로부터 인간용 구분자(Title) 입력을 받아 그것을 컴퓨터용 구분자(url에 보일 이름)로도 쓴다는 건데, 이 둘의 데이터 도메인(타입이란 단어 써도 되나?)은 다르다. 전자는 좀 더 일반적인 문자열이고, 후자는 영숫자(+ 하이픈)로 제약된다. Title에 들어갈 수 있는 문자열을 $$\mathbb{S}$$, url에 들어갈 구분자가 될 수 있는 문자열을 $$\mathbb{AN}$$이라고 하고 Title을 입력받아 url용 이름으로 바꾸는 함수를 $$f$$ 라고 하자. 이 시스템이 문제없이 작동하려면, 어떤 입력 $$x \in \mathbb{S}$$에 대해서도 $$f(x)$$이 $$\mathbb{AN}$$에 속해야 한다. 위의 경우

$$f(\textrm{“any English named space”}) = \textrm{“any-english-named-space”}$$

였고,

$$f(\textrm{“다람쥐 헌 쳇바퀴에 타고파2”}) = \textrm{“2”}$$

였다. 이 두 가지 경우는 문제가 없다.

문제는 $$f$$에 "다람쥐 헌 쳇바퀴에 타고파"를 입력했을 때이다. 이 경우

$$f(\textrm{“다람쥐 헌 쳇바퀴에 타고파”}) = \varepsilon$$

이고, 이 때 $$\varepsilon$$은 빈 문자열`""`을 가리키는 기호이다. 빈 문자열은 $$\mathbb{AN}$$에 속하지 않는다! 이런 경우 문제가 생긴다.

사용자가 입력한 문자열은 어디까지나 $$\mathbb{S}$$에 관한 것이고, 엄밀히 말하면 $$\mathbb{AN}$$은 $$\mathbb{S}$$와 별개이고 서비스가 사용자의 편의를 제공해 자동으로 처리해주는 것이다. 이것 자체는 괜찮다고 생각한다. 서비스가 가정한 주 사용자인 영어 모어 사용자들한테서는 일어나지 않을 문제일테고, 잘 돌아가면 "사용자가 굳이 몰라도 되는" 걸 자동으로 처리해주는 좋은 시스템이다. 그러나 어쨌든 문제는 발생했다. 모어가 영어였더라면 일어나지 않았을 문제가. 하여튼 CJK에서 태어난 게 죄다.

### 오류 메세지

사용자에게 기술적 용어를 사용한 오류 메세지를 쓰는 걸 피하라는 [가이드라인]이 알려져 있다. 예외적인 경우라면 사용자가 그 기술적 정보를 이용해서 어떤 행동을 할 수 있을 때일텐데, 이 경우의 데이터베이스 권한 오류 얘기는 사용자가 알아도 뭐 어쩔 수 있는 게 아니다.

조금 안타까운 점은 다음과 같다. Space 생성 이후에 URL을 변경할 수 있는데, 이 때는 아래 캡처와 같이 멀쩡한 메세지를 보여준다.

{: .center}
![Space url 변경 시 보여주는 메세지](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-17-06-35.png)

물론 이 메세지를 Space 생성시에 보여줄 수는 없지만(그 때는 url을 만드는 게 아니고 title을 만드는 거니까.) 그래도 어떻게 고려해서 생성 시 경험이 좀 더 매끄러웠으면 어땠을까.

### 여담

한편, 위에서 말한 $$f$$는 필연적으로 단사 함수가 아니고 (해시와 비슷한) 충돌이 일어날 수 있다. url 구분자가 "2"인 Space를 남겨놓고, "한글프로젝트2"라는 Space를 새로 만들면 여기서도 비슷한 오류가 일어나지 않을까? 그 실험 결과가 밑에 있다.

{: .center}
![url 구분자가 겹치면 어떻게 될까 하는 실험](/assets/img/2020-12-15-GitBook.com%20Limitation%20on%20Title%20of%20Space_2020-12-15-17-03-34.png)

…이건 잘 처리해 놨잖아!

## 후기

사실 뭐가 되었든 글을 써서 publish를 하고 싶은 충동이 커서 이 서비스를 알아본 건데, 이런 오류를 겪게 되었고 이 서비스를 썼을 때 비슷한 "CJK라서 겪는 문제"를 다시 겪지 않는다는 보장이 없어서 해당 서비스의 사용을 보류하고 대신 이 서비스에 대한 글을 쓰게 되었다. 소프트웨어를 쓰다 보면 화가 나는 일이 많아서 옛날부터 이런 사이트를 만들게 되었는데, 계기를 제공해 준 [GitBook.com]에 감사의 말을 남긴다.(사실 별로 다른 사례들에 비해서 그렇게 화가 나는 경우는 아니었다.) 쓰면서, Github Pages - Jekyll을 도입해 본다.

## 이 후에…

이 공간은 해당 서비스가 개선되었을 때를 대비해 남겨두고 싶다. 개선 되면 좋겠네요.

[GitBook.com]: https://gitbook.com/
[Legacy 프로젝트]: https://github.com/GitbookIO/gitbook
[가이드라인]: https://uxplanet.org/how-to-write-good-error-messages-858e4551cd4
